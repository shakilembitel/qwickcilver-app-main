<script>
  //    Reverse redeem

  async function reverseRedeem(payload, apiRawData) {
    fetch(POST_Reverse_Redeem, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        DateAtClient: await getCurrentDateTime(),
        TransactionId: apiRawData.transId,
        Authorization: `Bearer ${apiRawData.AuthToken}`,
      },
      body: JSON.stringify({
        TransactionModeId: '0',
        TransactionTypeId: '302',
        IdempotencyKey: payload.IdempotencyKey,
        InvoiceNumber: payload.InvoiceNumber,
        BillAmount: payload.BillAmount,
        Notes: payload.Notes,
        InputType: '1',
        NumberOfCards: '1',
        Cards: [
          {
            CardNumber: payload.Cards[0].CardNumber,
            CardPin: payload.Cards[0].CardPin,
            Amount: payload.Cards[0].Amount,
          },
        ],
      }),
    })
      .then((response) => {
        if (response.status !== 200) {
          throwErrorMessage(response.status);
          return false;
        }
      })
      .then((data) => {
        console.log('Reverse_redeem:', data);
        // Handle success or further operations with balance redeem data
      })
      .catch((error) => {
        console.error('Error Reverse_redeem', error);
      });
  }
</script>
